---
layout: post
status: publish
published: true
title: Lo que viene con Grails 1.1
author:
  display_name: dani
  login: dani
  email: danilat83@gmail.com
  url: http://www.danilat.com/weblog/
author_login: dani
author_email: danilat83@gmail.com
author_url: http://www.danilat.com/weblog/
wordpress_id: 209
wordpress_url: http://www.danilat.com/weblog/2009/02/02/lo-que-viene-con-grails-11/
date: '2009-02-02 02:57:59 +0100'
date_gmt: '2009-02-02 00:57:59 +0100'
categories:
- Grails
tags: []
comments:
- id: 9001
  author: Lili
  author_email: lili_3454@gmail.com
  author_url: ''
  date: '2009-02-02 19:22:01 +0100'
  date_gmt: '2009-02-02 17:22:01 +0100'
  content: Hola tengo en mi programa un punto en el que debe sumar 2008 + 1; son dos
    int, me deberia devolver 2009 pero me devuelve 20081, sabes porque pueda ser??
    gracias
- id: 9007
  author: Dani
  author_email: danilat83@gmail.com
  author_url: http://www.danilat.com/weblog
  date: '2009-02-02 21:15:22 +0100'
  date_gmt: '2009-02-02 19:15:22 +0100'
  content: "Hola Lili,\r\n\r\nHe estado pensando si contestarte o no, o simplemente
    borrar tu comentario:\r\n\r\n1- Lo que preguntas NO tiene relación alguna con
    el post, para esto existen muchos foros donde te podrían ayudar.\r\n\r\n2- Te
    está concatenando y no sumando... ¿Seguro que son 2 int?, ¿sobrecarga de operadores?\r\n\r\n3-
    Cuando preguntes en un FORO, ayuda poner el código que no hace lo que esperas,
    en este caso está claro que te está concatenando.\r\n\r\n3- No dices ni en que
    lenguaje de programación lo estás haciendo ¿Groovy?, ¿sobrecarga de operadores?...\r\n\r\n4-
    Parece que tratas de hacer algo con fechas, me pregunto si es lo más conveniente
    usar int o un objeto tipo fecha(o algo similar en el lenguaje que estés trabajando)\r\n\r\nEn
    fin, que aún intentándolo, no creo haberte ayudado demasiado ;)"
- id: 9050
  author: niceperl
  author_email: niceperl@gmail.com
  author_url: ''
  date: '2009-02-03 21:50:02 +0100'
  date_gmt: '2009-02-03 19:50:02 +0100'
  content: "Hola, soy un fan de esta herramienta, y ya he hecho mis pinitos en ella
    con resultados sorprendentes (relación calidad-funcionalidad-tiempo asombrosa).
    \r\nSimplemente quería recabar tu opinión sobre el futuro de este producto ahora
    que Spring ha hecho la compra de g2one, como crees que va a evolucionar y si la
    inversión en tiempo y esfuerzo de desarrollo de aplicaciones está garantizado
    a futuro.\r\nSe que es difícil responder, pero te pido tu opinión\r\nGracias."
- id: 9067
  author: Dani
  author_email: danilat83@gmail.com
  author_url: http://www.danilat.com/weblog
  date: '2009-02-04 04:58:11 +0100'
  date_gmt: '2009-02-04 02:58:11 +0100'
  content: "Hola niceperl, pues no veo respuestas fáciles, no :)\r\n\r\nSobre la compra
    de g2one por parte de spring source, pues me parece una buena noticia, estando
    en el portfolio de spring puede tener más \"fácil\" la entrada al mundo empresarial.\r\n\r\nSobre
    la inversión de tiempo y esfuerzo en desarrollar aplicaciones con Grails, pues
    yo pienso que sí.\r\n\r\nLa comunidad está creciendo poco a poco y goza de buena
    salud, aparte de que lo haya comprado Spring: el tráfico en la lista de correo
    va aumentando, van apareciendo más plugins de todo tipo, se están publicando bastantes
    libros, parece que al menos en países anglosajones está teniendo buena aceptación(en
    UK se han desarrollado varios proyectos para empresas reconocidas como Pepsi y
    Sky)...\r\n\r\nSobre como va a evolucionar, pues lo más inminente está en el <a
    href=\"http://grails.org/Roadmap\" rel=\"nofollow\">Roadmap</a>, lo más probable
    es que se siga trabajando en facilitar la integración con otras tecnologías. Pero
    a mi me gustaría que se trabajara en hacer más sencillo/limpio el uso de REST,
    en que se crearan más taglibs que los que vienen de serie, named routes... en
    fin, que se trabajara también en mejorar la parte web.\r\n\r\nPor curiosidad,
    ¿alguna url de algo que hayas desarrollado? ;)"
- id: 9527
  author: Albinegro
  author_email: adralher@gmail.com
  author_url: ''
  date: '2009-03-12 15:12:35 +0100'
  date_gmt: '2009-03-12 23:12:35 +0100'
  content: "Hola que tal tengo un bronx con u gsp ya que dentro de un form he agregado
    un \r\nesperaba que al ejecutarlo se fuera directo a ejecutar el action y el controler
    jajajaja pero no pasa nada ya he revisado que este bien el nombre del accion dentro
    de mi form y de mi controler pero no va por ahi puesto que decidi poner  y por
    fin ejecuto el action pero esta no es la  forma natural ya probe en Opera en Firefox
    y dios me ayude hasta en Explorer y nada. En fin muchas gracias por leerlo,  saludos
    de Orizaba para el mundo"
- id: 9528
  author: Albinegro
  author_email: adralher@gmail.com
  author_url: ''
  date: '2009-03-12 15:20:37 +0100'
  date_gmt: '2009-03-12 23:20:37 +0100'
  content: jajajaja que chido me quito mis tags va de nuez g:actionSubmit value="Entrar"
    y lo cambie por input type="submit" value="login" y de nuevo muchas gracias
- id: 9529
  author: dani
  author_email: danilat83@gmail.com
  author_url: http://www.danilat.com/weblog/
  date: '2009-03-12 18:47:19 +0100'
  date_gmt: '2009-03-13 02:47:19 +0100'
  content: "Hola Albinegro,\r\n\r\njejeje, recuerdo que también me confundí una vez
    con esto. Una opción es como dices, poner un input normalmente en HTML, pero puedes
    usar el tag submitButton, el actionSubmit es para enviar el formulario a una acción
    diferente a la del form(cuando se renderiza usa JS para hacerlo)\r\n\r\nhttp://grails.org/doc/1.0.x/ref/Tags/actionSubmit.html"
- id: 9532
  author: Albinegro
  author_email: adralher@gmail.com
  author_url: ''
  date: '2009-03-17 12:38:41 +0100'
  date_gmt: '2009-03-17 20:38:41 +0100'
  content: "Excelente!!!! muchas gracias para la otra prometo leer la referencia de
    grails.\r\n\r\nSaludos"
- id: 9534
  author: Albinegro
  author_email: adralher@gmail.com
  author_url: ''
  date: '2009-03-23 15:17:29 +0100'
  date_gmt: '2009-03-23 23:17:29 +0100'
  content: Hola que tal Dany uhmm otra ves molestando trato de hacer un ejercicio
    completo haciendo las operaciones basicas en una BD y si se puede ejecute algun
    Store (limosnero y con garrote) aunque sea sobre un solo dominio en grails y Mysql
    no se si ya has posteado algo o puedas recomendarme algun tutorial en fin muchas
    Gracias y saludos
- id: 9535
  author: dani
  author_email: danilat83@gmail.com
  author_url: http://www.danilat.com/weblog/
  date: '2009-03-24 15:49:24 +0100'
  date_gmt: '2009-03-24 23:49:24 +0100'
  content: "Si te he entendido bien, sólo descargándote el driver de mysql y cambiando
    la configuración del DataSource ya sería suficiente.\r\n\r\nAhora no sé decirte
    una referencia concreta, pero hay algunos posts o proyectos open source por ahí
    que te pueden servir."
---
<p>Todavía no he tenido oportunidad(¿tiempo?) de probar las betas de la versión 1.1 de Grails, pero ya llevo unas semanas siguiendo un poco las novedades que están llegando con las tres betas que se han publicado, tanto con <a href="http://grails.org/1.1-Beta3+Release+Notes">las relesae notes</a> como en la lista de correo.</p>
<p>Hay cosas que me parecen muy interesantes: el trabajo que se ha hecho en cuanto infraestructura, el manejo de submits duplicados, el "nuevo" framework de testing, las mejoras para el desarrollo de plugins, poder usar GORM fuera de Grails...</p>
<p>Estas son las principales novedades:</p>
<p><strong>GORM:</strong></p>
<p><a href="http://grails.org/GORM+-+StandAlone+Gorm">GORM es standalone</a>, ya <a href="http://svn.codehaus.org/grails/branches/GRAILS_1_1/samples/petclinic-mvc/">se puede</a> usar fuera de Grails.</p>
<p>Se completan los eventos de GORM con <em>afterInsert</em>, <em>afterUpdate</em> y <em>afterDelete</em>.</p>
<p>Persistencia de colecciones de tipos básicos, como colecciones de String:<br />
<code>class Person {<br />
   static hasMany = [nicknames:String]<br />
}</code></p>
<p>Persistencia de coleciones de tipos enum:<br />
<code>enum VehicleStatus { OFF, IDLING, ACCELERATING, DECELARATING }<br />
class Truck {<br />
   static hasMany = [statuses:VehicleStatus]<br />
}</code></p>
<p>Acceder a objetos persistentes en modo <em>sólo lectura</em>, buscándolos por id:<br />
<code>def book = Book.read(1)</code></p>
<p>Ordenación por defecto a nivel de clase y en las asociaciones:<br />
<code>class Book {<br />
  String title<br />
  static mapping = {<br />
     sort "title"<br />
  }<br />
}<br />
class Author {<br />
    static hasMany = [books:Book]<br />
    static mapping = {<br />
              books sort:"title"<br />
    }<br />
}</code></p>
<p>Obtención por lotes a nivel de clase y en asociaciones:<br />
<code>class Book {<br />
  String title<br />
  static mapping = {<br />
     batchSize 15<br />
  }<br />
}</code></p>
<p>Mejoras en los finders dinámicos. Se podrá utilizar el sufijo <em>InList</em>, cachear queries y usar bloqueo pesismista:</p>
<p><code>def books = Book.findByAuthorInList(['Dierk Koenig', 'Graeme Rocher'])<br />
def book = Book.findByTitle("Groovy in Action", [cache:true] )<br />
def book = Book.findByTitle("Groovy in Action", [lock:true] )</code></p>
<p>Relaciones uno a muchos unidireccionales con mapeo heredado, usando <em>joinTable</em>:<br />
<code>class Book {<br />
 String title<br />
 static belongsTo = Author<br />
 static hasMany = [authors:Author]<br />
static mapping = { authors joinTable:[name:"mm_author_books", key:'mm_book_id' ] }<br />
}<br />
class Author {<br />
 String name<br />
 static hasMany = [books:Book]<br />
 static mapping = { books joinTable:[name:"mm_author_books", key:'mm_author_id'] }<br />
}</code></p>
<p>Los tipos Enum pueden especificar un método <em>getId()</em> que GORM llamará para persistir el estado del enum<br />
<code>enum Country {<br />
   AUSTRIA('at'),<br />
   UNITED_STATES('us'),<br />
   GERMANY('de');<br />
final String id<br />
Country(String id) { this.id = id } }</code></p>
<p><strong>Plugins:</strong></p>
<p>Plugins globales, para instalar en todas las aplicaciones<br />
<code>grails install-plugin webtest -global</code></p>
<p>Múltiples repositorios de plugins:<br />
<code>grails.plugin.repos.discovery.myRepository="http://svn.codehaus.org/grails/trunk/grails-test-plugin-repo"<br />
grails.plugin.repos.distribution.myRepository="https://svn.codehaus.org/grails/trunk/grails-test-plugin-repo"</code></p>
<p>Resolución transitiva de depndencias entre plugins.</p>
<p>Se puede definir un ámbito y el entorno donde un plugin se cargará o empaquetará<br />
<code>def environments = ['dev', 'test']<br />
def scopes = [excludes:'war']</code></p>
<p>Desarrollo modular de aplicaciones usando plugins, sin necesidad de instalarlos y pudiendo estar en cualquier lugar del sistema de ficheros. Muy útil para probar un plugin propio en una aplicación real(esto antes resultaba incómodo), o para unir en una aplicación funcionalidades repartidas en plugins.</p>
<p><strong>Testing:</strong></p>
<p>Se ha añadido <a href="http://www.grails.org/Testing+Plugin">testing plugin</a> como framework de tests que mejora el de las versiones 1.0.x</p>
<p><strong>Data Binding:</strong></p>
<p>Se pueden definir de qué propiedades se hace el binding:<br />
<code>person.properties["firstName","lastName"] = params</code></p>
<p>Es posible hacer binding de colecciones de objetos, Grails se encarga de instanciar los objetos y los índices:<br />
<code>&lt;g:textField name="books[0].title" value="the Stand" /&gt;<br />
&lt;g:textField name="books[1].title" value="the Shining" /&gt;<br />
&lt;g:textField name="books[2].title" value="Red Madder" /&gt;</code></p>
<p><strong>Scaffolding:</strong></p>
<p>El scaffolding dinámico también generará las vistas usando los templates generados(y personalizados) con <em>install-templates</em>.</p>
<p>El scaffolding ahora soporta relaciones muchos a muchos y asociaciones uno a muchos unidireccionales.</p>
<p><strong>Controllers:</strong></p>
<p>Manejo de submits duplicados o invalidos usando el patrón <em>Synchronizer Token</em>:<br />
<code>//en el gsp<br />
&lt;g:form useToken="true"&gt;...&lt;/g:form&gt;<br />
//controlador<br />
withForm {<br />
   // good request<br />
}.invalidToken {<br />
   // bad request<br />
}</code></p>
<p>Además de redireccionar ya es posible hacer forward de una petición:<br />
<code>forward controller:"home", action:"index"</code></p>
<p><strong>Groovy Server Pages:</strong></p>
<p>Ya es posible utilizar librerías de tags JSP, de igual forma que cualquier librería de tags GSP:<br />
<code>&lt;%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %&gt;<br />
&lt;fmt:formatNumber value="${10}" pattern=".00"/&gt;<br />
${fmt.formatNumber(value:10, pattern:".00")}</code></p>
<p>Un namespace propio para usar templates, <em>tmpl</em>:<br />
<code>//template _tableRow.gsp<br />
&lt;tr&gt;<br />
    &lt;td class="prop"&gt;${label}&lt;/td&gt;<br />
    &lt;td class="value"&gt;${value}&lt;/td&gt;<br />
&lt;/tr&gt;<br />
//Otro gsp<br />
&lt;tmpl:tableRow label="one" value="two" /&gt;</code></p>
<p>Es posible hacer includes de la respuesta de otro controlador, acción o vista en la vista actual:<br />
<code>&lt;g:include controller="book" action="list"/&gt;</code></p>
<p>Posibilidad de renderizar templates de los plugins:<br />
<code>&lt;g:render template="pathToTemplateFile" plugin="miplugin"/&gt;</code></p>
<p>Ahora los gsp se renderizan más rápido, <a href="https://twitter.com/graemerocher/status/1133002691">evitando</a> el uso de StringBuffer y StringWriter.</p>
<p><strong>Infraestructura:</strong></p>
<p>Grails viene con un plugin de Maven y un arquetipo:<br />
<code>mvn grails:create-pom</code></p>
<p>Integración con Ivy y Ant, crea el build.xml y el ivy.xml para construir la aplicación Grails sin que sea necesario que Grails esté instalado en el servidor.</p>
<p>BeanBuilder (el DSL de Spring), ahora soporta los namespaces de Spring pudiendo utilizar así el soporte de AOP.</p>
<p>Nuevo API para acceder al entorno de ejecución y a los meta datos de la aplicación:<br />
<code>switch(Environment.current) {<br />
	case Environment.DEVELOPMENT:<br />
	   configureForDevelopment()<br />
	break<br />
	case Environment.PRODUCTION:<br />
	   configureForProduction()<br />
	break<br />
}<br />
def metadata = grails.util.Metadata.current<br />
println metadata.applicationName<br />
println metadata.applicationVersion</code></p>
<p>Nuevo DSL para configurar Log4j</p>
<p>La configuración de los builds se ha flexibilizado pudiendo configurar diferentes aspectos en el nuevo <em>BuildConfig</em></p>
<p>Posibilidad de encriptar las contraseñas del <em>DataSource</em></p>
<p>--<br />
Veremos qué añadidos/mejoras más aparecen en las RC y hasta que esté disponible Grails 1.1</p>
